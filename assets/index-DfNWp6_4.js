(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(n){if(n.ep)return;n.ep=!0;const t=o(n);fetch(n.href,t)}})();class x{constructor(){this.target=24,this.solutions=[]}solve(e){if(this.solutions=[],e.length!==4)return[];this.foundSolutions=new Set;const o=e.map(r=>({value:r,expr:r.toString(),prec:3}));return this._search(o),Array.from(this.foundSolutions)}_search(e){if(e.length===1){Math.abs(e[0].value-this.target)<1e-6&&this.foundSolutions.add(e[0].expr);return}for(let o=0;o<e.length;o++)for(let r=0;r<e.length;r++){if(o===r)continue;const n=e[o],t=e[r],i=e.filter((u,c)=>c!==o&&c!==r);this._tryOp(n,t,"+",i),this._tryOp(n,t,"-",i),this._tryOp(n,t,"*",i),t.value!==0&&n.value%t.value===0&&this._tryOp(n,t,"/",i)}}_tryOp(e,o,r,n){let t=0;switch(r){case"+":t=e.value+o.value;break;case"-":t=e.value-o.value;break;case"*":t=e.value*o.value;break;case"/":t=e.value/o.value;break}const u={"+":1,"-":1,"*":2,"/":2}[r],c=(f,B=!1)=>{let v=f.expr,h=!1;return(f.prec<u||f.prec===u&&B&&(r==="-"||r==="/"))&&(h=!0),h?`(${v})`:v},b=c(e,!1),L=c(o,!0),I=`${b} ${r} ${L}`,O={value:t,expr:I,prec:u};this._search([...n,O])}}class ${constructor(){this.solver=new x}generate(){let e,o;do e=Array.from({length:4},()=>Math.floor(Math.random()*13)+1),o=this.solver.solve(e);while(o.length===0);return{numbers:e,solutions:o}}}const w=new $,g=document.getElementById("cards-container"),C=document.getElementById("refresh-btn"),P=document.getElementById("solve-btn"),a=document.getElementById("solutions-panel"),S=document.getElementById("solutions-list"),_=document.getElementById("solution-count"),A=document.getElementById("mascot-message");let m=[],l=!1;const p=["♥","♦","♣","♠"],N=()=>p[Math.floor(Math.random()*p.length)],T=s=>s==="♥"||s==="♦",H=s=>s===1?"A":s===11?"J":s===12?"Q":s===13?"K":s.toString(),y=["动动脑筋，在这个小脑袋里算一算！","不要偷看答案，除非你真的试过了！","算错了没关系，再试一次！","你是最棒的数学小天才！","想想看，有什么办法能凑成24？"];function E(){const{numbers:s,solutions:e}=w.generate();m=e,F(s),G(),d("新的题目来了！加油！")}function F(s){g.innerHTML="",s.forEach((e,o)=>{const r=N(),n=H(e),t=T(r)?"red":"black",i=document.createElement("div");i.className=`card ${t}`,i.style.animation=`bounce 0.5s ease ${o*.1}s`,i.innerHTML=`
      <div class="suit top-left">${r}</div>
      <div class="number">${n}</div>
      <div class="suit bottom-right">${r}</div>
    `,g.appendChild(i)})}function G(){l=!1,a.classList.remove("visible"),a.classList.add("hidden"),S.innerHTML="",_.textContent=m.length}function R(){if(l)return;const s=[...m].sort(()=>Math.random()-.5);S.innerHTML=s.map(e=>`<li>${e} = 24</li>`).join(""),a.classList.remove("hidden"),a.offsetWidth,a.classList.add("visible"),l=!0,d("这里是所有的解法，记住思路比答案更重要哦！")}function d(s){A.textContent=s;const e=document.querySelector(".mascot");e.style.animation="none",e.offsetWidth,e.style.animation="bounce 2s infinite"}function M(){if(!l){const s=y[Math.floor(Math.random()*y.length)];d(s)}}C.addEventListener("click",()=>{E(),M()});P.addEventListener("click",()=>{if(l){d("已经在显示答案啦！");return}R()});setInterval(()=>{l||M()},3e4);E();
